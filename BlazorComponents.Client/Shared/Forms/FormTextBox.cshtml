@using BlazorComponents.Client
@using BlazorComponents.Shared
@implements IConfiguratorComponent



<div class="form-group">
    <label>@Setup.DisplayName</label>
    <input type="text" bind="@TextBoxValue" class="form-control" />
</div>



@functions {
    [Parameter]
    public ConfiguratorSetup Setup { get; set; } // Demonstrates how a parent component can supply parameters

    [Parameter]
    public FormEventDispatcher Dispatcher { get; set; }


    private string TextBoxValue { get; set; }

    public string Value {
        get
        {
            return TextBoxValue;
        }
        set
        {
            TextBoxValue = value;
            this.StateHasChanged();
        }
    }


    protected override void OnParametersSet()
    {
        //base.OnParametersSet();
        Console.WriteLine($@"[Forms] OnParametersSet (FormTextBox)");

        if (Setup == null)
            throw new Exception("No configurator setup is available, cannot initialize FormTextBox.");

        if (Dispatcher == null)
            throw new Exception("No dispatcher is available, cannot register FormTextBox.");

        Dispatcher.RegisterComponent(Setup.PropertyName,this);
    }
 }
