@using BlazorComponents.Client
@using BlazorComponents.Shared

<wc-substitution class="@_hoverClass"
                 ondragenter="@(e => OnSubstitutionDragEnter(e))"
                 ondragleave="@(e => OnSubstitutionDragLeave(e))"
                 data-id1="@DesignNode.ContentId"
                 data-id2="@DesignNode.PlaceHolderId">
    
    <CascadingValue Value=@DesignNode Name="SubstitutionNode">
        <PageDesignerDropTarget />

        <PageDesignerChildren DesignNodeCollection=@DesignNode.ChildNodes />

        @if (DesignNode.ChildNodes.Any())
        {
            <PageDesignerDropTarget AfterDesignNode=@DesignNode.ChildNodes.Last()/>
        }
    </CascadingValue>
</wc-substitution>

@functions {
    [Parameter]
    PreviewNode DesignNode { get; set; } // Demonstrates how a parent component can supply parameters

    [CascadingParameter]
    protected PagePreviewEventsDispatcher Dispatcher { get; set; }

    private string _hoverClass = "";

    void OnSubstitutionDragEnter(UIDragEventArgs e)
    {
        _hoverClass="hover";
    }

    void OnSubstitutionDragLeave(UIDragEventArgs e)
    {
        _hoverClass="";
    }


}
